<div id="user_form">
	<%= form_for(@user) do |f| %>
		<% if @user.errors.any? %>
			<div id="error_explanation">
				<h2><%= pluralize(@user.errors.count, "error") << " " << t(:form_errors_found) %> :</h2>
				<ul>
					<% @user.errors.full_messages.each do |msg| %>
					<li><%= msg %></li>
					<% end %>
				</ul>
			</div>
		<% end %>

		<% available_languages = [[t(:lang_catalan), 'ca'], [t(:lang_spanish), 'es'], [t(:lang_english), 'en']] %>

		<% available_roles = [[t(:role_volunteer).humanize, "volunteer"]] %>
		<% if @user.allowed_to?(:manage_technician_users) %>
			<% available_roles << [t(:role_technician).humanize,"technician"] %>
		<% end %>
		<% if @user.allowed_to?(:manage_technician_users) %>
			<% available_roles << [t(:role_admin).humanize, "admin"] %>
		<% end %>

		<div class="field">
			<%= f.label :name, t(:form_user_name) %><br>
			<%= f.text_field :name %>
		</div>
		<div class="field">
			<%= f.label :surname, t(:form_user_surname) %><br>
			<%= f.text_field :surname %>
		</div>
		<div class="field">
			<%= f.label :email, t(:form_user_email) %><br>
			<%= f.email_field :email %>
		</div>
		<div class="field">
			<%= f.label :language, t(:form_user_language) %><br>
			<%= f.select :language, available_languages %>
		</div>
		<div class="field">
			<%= f.label :role, t(:form_user_role) %><br>
			<%= f.select :role, available_roles %>
		</div>
		<div class="field">
			<%= f.label :password, t(:form_user_password) %><br>
			<%= f.password_field :password %>
		</div>
		<div class="field">
			<%= f.label :password_confirmation, t(:form_user_password_confirmation)  %><br>
			<%= f.password_field :password_confirmation %>
		</div>
		<%= render 'add_assemblies' %>
		<div class="actions btn">
			<%= f.submit t(:form_user_submit) %>
		</div>
	<% end %>
</div>
